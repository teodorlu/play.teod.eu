{:path [], :nextjournal/value {:package :directory, :toc {:path [], :nextjournal/value [{:title "CLJ-Kondo hooks for application programmers", :emoji nil, :path "#clj-kondo-hooks-for-application-programmers", :items [{:title "Kondo already knows certain macros", :emoji nil, :path "#kondo-already-knows-certain-macros", :items []}]}], :nextjournal/render-opts {:toc-visibility false, :set-hash? true}, :nextjournal/viewer {:name nextjournal.clerk.viewer/toc-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render.navbar/render-items], :hash "5dtesrAmYqLZQQHSMEfFTNpmLtY4nC"}}, :sidenotes? false, :toc-visibility false, :atom-var-name->state {}, :ns #clerk/render-fn+opts [{:eval true} (ns kondo-hooks-for-application-programmers)], :file "kondo_hooks_for_application_programmers.clj", :scope kondo-hooks-for-application-programmers, :header {:path [], :nextjournal/value [:div.viewer.w-full.max-w-prose.px-8.not-prose.mt-3 [:div.mb-8.text-xs.sans-serif.text-slate-400 nil nil [:span "Generated with " [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href "https://clerk.vision"} "Clerk"] [:<> " from " [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href "https://github.com/teodorlu/play.teod.eu/blob/5e2d2096ad9e91cf0978ef9419ca1cc071dae511/kondo-hooks-for-application-programmers/kondo_hooks_for_application_programmers.clj"} "kondo_hooks_for_application_programmers.clj" [:<> "@" [:span.tabular-nums "5e2d209"]]]]]]], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}, :open-graph {:type "article:clerk", :title "CLJ-Kondo hooks for application programmers", :description "Macros are a powerful tool that can cause confusion and tears."}, :title "CLJ-Kondo hooks for application programmers", :blocks [{:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id "kondo-hooks-for-application-programmers/markdown-5dsrya8YbjB95EzKFdzMMA6nEqspre"} ["h1" {:id "clj-kondo-hooks-for-application-programmers"} [:<> "CLJ-Kondo hooks for application programmers"]] [:p [:<> "Macros are a powerful tool that can cause confusion and tears."]] [:p [:<> "Static analysis with CLJ-Kondo can help tame that confusion and avoid those tears."] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "Let's learn about just that."]] ["h2" {:id "kondo-already-knows-certain-macros"} [:<> "Kondo already knows certain macros"]] [:p [:<> "Your editor already knows the "] [:code [:<> "for"]] [:<> " macro:"]]], :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/markdown-5dsrya8YbjB95EzKFdzMMA6nEqspre"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} identity], :hash "5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value "(for [n (range 10)]\n  (- n))", :nextjournal/render-opts {:loc {:line 15, :end-line 16, :column 1, :end-column 9}, :id "kondo-hooks-for-application-programmers/anon-expr-5dtyjcEW98hdKKp1nepoBZZ75Q59gj-code"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code-block], :hash "5dru1FUcVRTRrVKJFbNw4FG2wXmiwB"}} {:path [1], :nextjournal/value {:nextjournal/presented {:path [1], :nextjournal/value [{:path [1 0], :nextjournal/value 0, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-number], :hash "5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o"}} {:path [1 1], :nextjournal/value -1, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-number], :hash "5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o"}} {:path [1 2], :nextjournal/value -2, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-number], :hash "5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o"}} {:path [1 3], :nextjournal/value -3, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-number], :hash "5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o"}} {:path [1 4], :nextjournal/value -4, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-number], :hash "5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o"}} {:path [1 5], :nextjournal/value -5, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-number], :hash "5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o"}} {:path [1 6], :nextjournal/value -6, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-number], :hash "5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o"}} {:path [1 7], :nextjournal/value -7, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-number], :hash "5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o"}} {:path [1 8], :nextjournal/value -8, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-number], :hash "5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o"}} {:path [1 9], :nextjournal/value -9, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-number], :hash "5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/sequential-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-coll], :opening-paren "(", :closing-paren (")"), :page-size 20, :hash "5dsgY1QgV2KqnvvrRRC3HXgCeF3Qge"}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/anon-expr-5dtyjcEW98hdKKp1nepoBZZ75Q59gj-result-1"}}, :nextjournal/blob-id "5dtueFNNuCsCxjKNSx1LJ4DcsG4fWh"}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/anon-expr-5dtyjcEW98hdKKp1nepoBZZ75Q59gj-result-1"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-result], :hash "5dtGVHesd2XCTLFYF3aY4kJvkrX1x1"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id "kondo-hooks-for-application-programmers/markdown-5dscSjJP9YQJ6zDe46T2GUsQ5v1HA5"} [:p [:<> "Interestingly, I to shave a very small yak in order to present "] [:code [:<> "for"]] [:<> "'s doc to"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "you in a nice way."]]], :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/markdown-5dscSjJP9YQJ6zDe46T2GUsQ5v1HA5"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} identity], :hash "5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value "(require '[clojure.repl]\n         '[nextjournal.clerk :as clerk])", :nextjournal/render-opts {:loc {:line 21, :end-line 24, :column 1, :end-column 41}, :id "kondo-hooks-for-application-programmers/anon-expr-5dsgDJw1QtocVMzZjFxX9qPJDZhKyb-code"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code-block], :hash "5dru1FUcVRTRrVKJFbNw4FG2wXmiwB"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value "(defn doc* [sym]\n  `(clerk/html [:pre (with-out-str (clojure.repl/doc ~sym))]))", :nextjournal/render-opts {:loc {:line 26, :end-line 27, :column 1, :end-column 63}, :id "kondo-hooks-for-application-programmers/doc*-code"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code-block], :hash "5dru1FUcVRTRrVKJFbNw4FG2wXmiwB"}} {:path [1], :nextjournal/value {:nextjournal/presented {:path [1], :nextjournal/value "#function[kondo-hooks-for-application-programmers/doc*]", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] (try [nextjournal.clerk.render/inspect (nextjournal.clerk.viewer/read-string-without-tag-table x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x))))], :hash "5dt2ru159tAMavCJULP69Zvz1i4Zfd"}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/doc*-result-1"}}, :nextjournal/blob-id nil}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/doc*-result-1"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-result], :hash "5dtGVHesd2XCTLFYF3aY4kJvkrX1x1"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value "(defmacro doc [code]\n  (doc* code))", :nextjournal/render-opts {:loc {:line 29, :end-line 30, :column 1, :end-column 15}, :id "kondo-hooks-for-application-programmers/doc-code"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code-block], :hash "5dru1FUcVRTRrVKJFbNw4FG2wXmiwB"}} {:path [1], :nextjournal/value {:nextjournal/presented {:path [1], :nextjournal/value "#function[kondo-hooks-for-application-programmers/doc]", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] (try [nextjournal.clerk.render/inspect (nextjournal.clerk.viewer/read-string-without-tag-table x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x))))], :hash "5dt2ru159tAMavCJULP69Zvz1i4Zfd"}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/doc-result-1"}}, :nextjournal/blob-id nil}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/doc-result-1"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-result], :hash "5dtGVHesd2XCTLFYF3aY4kJvkrX1x1"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value "(doc for)", :nextjournal/render-opts {:loc {:line 32, :end-line 32, :column 1, :end-column 10}, :id "kondo-hooks-for-application-programmers/anon-expr-5dsqHYMK2C83AWwwMQx4ZXNV4Rvx48-code"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code-block], :hash "5dru1FUcVRTRrVKJFbNw4FG2wXmiwB"}} {:path [1], :nextjournal/value {:nextjournal/presented {:path [1], :nextjournal/value [:pre "-------------------------\nclojure.core/for\n([seq-exprs body-expr])\nMacro\n  List comprehension. Takes a vector of one or more\n   binding-form/collection-expr pairs, each followed by zero or more\n   modifiers, and yields a lazy sequence of evaluations of expr.\n   Collections are iterated in a nested fashion, rightmost fastest,\n   and nested coll-exprs can refer to bindings created in prior\n   binding-forms.  Supported modifiers are: :let [binding-form expr ...],\n   :while test, :when test.\n\n  (take 100 (for [x (range 100000000) y (range 1000000) :while (< y x)] [x y]))\n"], :nextjournal/visibility {:code :show, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/anon-expr-5dsqHYMK2C83AWwwMQx4ZXNV4Rvx48-result-1"}}, :nextjournal/blob-id "5dtDmP1ZfuVd8FckGVYvEWro5gaLA3"}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/anon-expr-5dsqHYMK2C83AWwwMQx4ZXNV4Rvx48-result-1"}, :nextjournal/visibility {:code :show, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-result], :hash "5dtGVHesd2XCTLFYF3aY4kJvkrX1x1"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id "kondo-hooks-for-application-programmers/markdown-5dtKNaZo6vVAnhnxuUXc4a78zfhDdh"} [:p [:<> "(detour over!)"]] [:p [:<> "... as I was waying, we have lovely tooling that works for the built-in"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "macros, but not for userspace tooling."] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "Docstrings do work out of the box with clojure.repl/doc:"]]], :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/markdown-5dtKNaZo6vVAnhnxuUXc4a78zfhDdh"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} identity], :hash "5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value "(defmacro i-laugh-at-your-two-parameters\n  \"Laugh at two parameters, hopelessly ignored.\"\n  [x y] \"lol\")", :nextjournal/render-opts {:loc {:line 40, :end-line 42, :column 1, :end-column 15}, :id "kondo-hooks-for-application-programmers/i-laugh-at-your-two-parameters-code"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code-block], :hash "5dru1FUcVRTRrVKJFbNw4FG2wXmiwB"}} {:path [1], :nextjournal/value {:nextjournal/presented {:path [1], :nextjournal/value "#function[kondo-hooks-for-application-programmers/i-laugh-at-your-two-parameters]", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] (try [nextjournal.clerk.render/inspect (nextjournal.clerk.viewer/read-string-without-tag-table x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x))))], :hash "5dt2ru159tAMavCJULP69Zvz1i4Zfd"}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/i-laugh-at-your-two-parameters-result-1"}}, :nextjournal/blob-id nil}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/i-laugh-at-your-two-parameters-result-1"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-result], :hash "5dtGVHesd2XCTLFYF3aY4kJvkrX1x1"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value "(doc i-laugh-at-your-two-parameters)", :nextjournal/render-opts {:loc {:line 44, :end-line 44, :column 1, :end-column 37}, :id "kondo-hooks-for-application-programmers/anon-expr-5du5EvqvB2y4DH2n9LXeptFWGaVtag-code"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code-block], :hash "5dru1FUcVRTRrVKJFbNw4FG2wXmiwB"}} {:path [1], :nextjournal/value {:nextjournal/presented {:path [1], :nextjournal/value [:pre "-------------------------\nkondo-hooks-for-application-programmers/i-laugh-at-your-two-parameters\n([x y])\nMacro\n  Laugh at two parameters, hopelessly ignored.\n"], :nextjournal/visibility {:code :show, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/anon-expr-5du5EvqvB2y4DH2n9LXeptFWGaVtag-result-1"}}, :nextjournal/blob-id "5dtTwFcf4NZhohFhZE65oUVXDNzASa"}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/anon-expr-5du5EvqvB2y4DH2n9LXeptFWGaVtag-result-1"}, :nextjournal/visibility {:code :show, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-result], :hash "5dtGVHesd2XCTLFYF3aY4kJvkrX1x1"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id "kondo-hooks-for-application-programmers/markdown-5ds7oRPb77T55qbBLB2tDMJsNKFv3B"} [:p [:<> "But what about kondo?"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "To demonstrate some actual utility, we must do something more interesting."] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "Let's."]]], :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/markdown-5ds7oRPb77T55qbBLB2tDMJsNKFv3B"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} identity], :hash "5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value "(defmacro deflaughing\n  [sym & body]\n  (println \"I laugh at your petty\" sym\n           \", created from the woefully inadequate\" body)\n  `(def ~sym (do ~@body)))", :nextjournal/render-opts {:loc {:line 50, :end-line 54, :column 1, :end-column 27}, :id "kondo-hooks-for-application-programmers/deflaughing-code"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code-block], :hash "5dru1FUcVRTRrVKJFbNw4FG2wXmiwB"}} {:path [1], :nextjournal/value {:nextjournal/presented {:path [1], :nextjournal/value "#function[kondo-hooks-for-application-programmers/deflaughing]", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] (try [nextjournal.clerk.render/inspect (nextjournal.clerk.viewer/read-string-without-tag-table x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x))))], :hash "5dt2ru159tAMavCJULP69Zvz1i4Zfd"}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/deflaughing-result-1"}}, :nextjournal/blob-id nil}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/deflaughing-result-1"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-result], :hash "5dtGVHesd2XCTLFYF3aY4kJvkrX1x1"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value "(defmacro capture-out [& body]\n  `(clerk/html [:pre (with-out-str ~@body)]))", :nextjournal/render-opts {:loc {:line 56, :end-line 57, :column 1, :end-column 46}, :id "kondo-hooks-for-application-programmers/capture-out-code"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code-block], :hash "5dru1FUcVRTRrVKJFbNw4FG2wXmiwB"}} {:path [1], :nextjournal/value {:nextjournal/presented {:path [1], :nextjournal/value "#function[kondo-hooks-for-application-programmers/capture-out]", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [x] (try [nextjournal.clerk.render/inspect (nextjournal.clerk.viewer/read-string-without-tag-table x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x))))], :hash "5dt2ru159tAMavCJULP69Zvz1i4Zfd"}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/capture-out-result-1"}}, :nextjournal/blob-id nil}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/capture-out-result-1"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-result], :hash "5dtGVHesd2XCTLFYF3aY4kJvkrX1x1"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value "(capture-out (macroexpand '(deflaughing the-number-after-one-and-two (+ 1 2))))", :nextjournal/render-opts {:loc {:line 59, :end-line 59, :column 1, :end-column 80}, :id "kondo-hooks-for-application-programmers/anon-expr-5duHZ4vFHv1UFH6qFmGa5ScKbrivm6-code"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code-block], :hash "5dru1FUcVRTRrVKJFbNw4FG2wXmiwB"}} {:path [1], :nextjournal/value {:nextjournal/presented {:path [1], :nextjournal/value [:pre "I laugh at your petty the-number-after-one-and-two , created from the woefully inadequate ((+ 1 2))\n"], :nextjournal/visibility {:code :show, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/anon-expr-5duHZ4vFHv1UFH6qFmGa5ScKbrivm6-result-1"}}, :nextjournal/blob-id "5dsBC6N1Qh7SVxAPg64r8TumEkTGTC"}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/anon-expr-5duHZ4vFHv1UFH6qFmGa5ScKbrivm6-result-1"}, :nextjournal/visibility {:code :show, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-result], :hash "5dtGVHesd2XCTLFYF3aY4kJvkrX1x1"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id "kondo-hooks-for-application-programmers/markdown-5dr3S4Um1c1f2qJJ9ZHht1ew351xAo"} [:p [:<> "There we go, a macro that does something silly "] [:em [:<> "and"]] [:<> " demonstrates the"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:<> "limitations of tooling with such macros."]]], :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/markdown-5dr3S4Um1c1f2qJJ9ZHht1ew351xAo"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} identity], :hash "5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value "(deflaughing laugh-all-you-want (+ 1 2))", :nextjournal/render-opts {:loc {:line 64, :end-line 64, :column 1, :end-column 41}, :id "kondo-hooks-for-application-programmers/laugh-all-you-want-code"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-code-block], :hash "5dru1FUcVRTRrVKJFbNw4FG2wXmiwB"}} {:path [1], :nextjournal/value {:nextjournal/presented {:path [1], :nextjournal/value 3, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-number], :hash "5dr3R1ZvHCoRHpxsQq4D4ARv9BQC7o"}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/laugh-all-you-want-result-1"}}, :nextjournal/blob-id "5dtZQXDtKywWVnPKNp596b4KWN1QKs"}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/laugh-all-you-want-result-1"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-result], :hash "5dtGVHesd2XCTLFYF3aY4kJvkrX1x1"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id "kondo-hooks-for-application-programmers/markdown-5dtYh6MF7CGHLcXsFxEBWTUMndzvuZ"} [:p [:<> "Already, I've noticed two problems:"]] [:ol [:li [:<> [:<> "CLJ-Kondo gives me an \"unresolved symbol\" warning for "] [:code [:<> "laugh-all-you-want"]]]] [:li [:<> [:<> "Clerk's dependency analysis breaks down, because it doesn't guess that redefining"] [#clerk/render-fn+opts [{:eval true} nextjournal.clerk.render/inspect-presented] {:nextjournal/value [:<> " "], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}}] [:code [:<> "deflaughing"]] [:<> " in the background needs to invalidate the capture-out of the macroexpand."]]]]], :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/markdown-5dtYh6MF7CGHLcXsFxEBWTUMndzvuZ"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} identity], :hash "5dsg4Bx9A9L7WvvCgamUoRtxUsmYCe"}} {:path [], :nextjournal/value [{:path [0], :nextjournal/value {:nextjournal/presented {:path [0], :nextjournal/value [:div {:style {:height "30vh"}}], :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-html], :hash "5drpr3yzJ1CcHNbRHnK2sVyn7YUmXB"}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/anon-expr-5drxc6Us9xAV8nupDDZVYKMZj2y2Rg-result"}}, :nextjournal/blob-id "5dtFqsXqvfhkrcFzSuCV4y8qPU3rw4"}, :nextjournal/render-opts {:id "kondo-hooks-for-application-programmers/anon-expr-5drxc6Us9xAV8nupDDZVYKMZj2y2Rg-result"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-result], :hash "5dtGVHesd2XCTLFYF3aY4kJvkrX1x1"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/cell-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} (fn [xs opts] (into [:<>] (nextjournal.clerk.render/inspect-children opts) xs))], :hash "5dtX6xLh3vbeFdswBY6jLXmB8QTqo2"}}]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/notebook-viewer, :render-fn #clerk/render-fn+opts [{:render-evaluator :sci} nextjournal.clerk.render/render-notebook], :hash "5duAFDxE4sCnRX71Wo6zeCpC9C3djE"}}