<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Journal: 2024</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="icon" type="image/x-icon" href="/green.png">
  <!-- <script type="text/javascript" src="https://livejs.com/live.js" async></script> -->
  <link rel="stylesheet" href="/adjustments.css">

  <script type="text/javascript">
   const hostCanonical = "play.teod.eu";
   const hostAlias1 = "playground.teod.eu";
   const hostLocal1 = "localhost:9945";
   if (
       window.location.host === hostAlias1
       // || window.location.host === hostLocal1
   ) {
       // redirect playground.teod.eu to play.teod.eu
       // redirect playground.teod.eu/aphorisms to play.teod.eu/aphorisms
       const pathname = window.location.pathname || "";
       window.location.replace("https://" + hostCanonical + pathname);
   }
  </script>
  <!-- play.teod.eu/scittle/scittle-with-extras.html -->
  <!-- shared HTML embed for scittle goodies -->

  <!-- Scittle -->
  <script defer src="https://cdn.jsdelivr.net/npm/scittle@0.3.10/dist/scittle.js" type="application/javascript"></script>

  <!-- React -->
  <script defer crossorigin src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
  <script defer crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>

  <!-- Reagent and HTTP requests for Clojurescript -->
  <script defer src="https://cdn.jsdelivr.net/npm/scittle@0.3.10/dist/scittle.reagent.js" type="application/javascript"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/scittle@0.3.10/dist/scittle.cljs-ajax.js" type="application/javascript"></script>

  <!-- Random page functionality -->
  <script defer src="/tools/goto_random_page.cljs" type="application/x-scittle"></script>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Journal: 2024</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#section" id="toc-section">2024-01-07</a>
<ul>
<li><a href="#mistaking-category-for-entity"
id="toc-mistaking-category-for-entity">Mistaking category for
entity</a></li>
</ul></li>
<li><a href="#section-1" id="toc-section-1">2024-02-10</a>
<ul>
<li><a href="#state-pling-plong" id="toc-state-pling-plong">State pling
plong</a></li>
</ul></li>
<li><a href="#section-2" id="toc-section-2">2024-02-18</a>
<ul>
<li><a href="#state-pling-plong-2" id="toc-state-pling-plong-2">State
pling plong 2</a></li>
<li><a href="#contributing-to-igrishaevpg2"
id="toc-contributing-to-igrishaevpg2">Contributing to
igrishaev/pg2</a></li>
</ul></li>
<li><a href="#section-3" id="toc-section-3">2024-02-25</a>
<ul>
<li><a href="#scicloj-study-group" id="toc-scicloj-study-group">scicloj
study group</a></li>
</ul></li>
<li><a href="#section-4" id="toc-section-4">2024-02-29</a>
<ul>
<li><a href="#a-ui-for-updates" id="toc-a-ui-for-updates">a UI for
updates</a></li>
</ul></li>
<li><a href="#section-5" id="toc-section-5">2024-03-28</a>
<ul>
<li><a href="#poor-performance-on-main-page"
id="toc-poor-performance-on-main-page">Poor performance on main
page</a></li>
</ul></li>
<li><a href="#section-6" id="toc-section-6">2024-03-29</a>
<ul>
<li><a href="#a-new-random-button" id="toc-a-new-random-button">a new
random button!</a></li>
<li><a href="#on-coding-without-a-goal"
id="toc-on-coding-without-a-goal">On coding without a goal</a></li>
</ul></li>
</ul>
</nav>
<p><a href="..">..</a></p>
<h2 id="section">2024-01-07</h2>
<h3 id="mistaking-category-for-entity">Mistaking category for
entity</h3>
<p>In programming, names should make it clear whether you’re talking
about a category of things or a specific entity. I commonly see
programmers work with entities, but name the category. The name is
<em>too wide</em>, if we use <a href="../zach-tellman/">Zach
Tellman</a>’s terminology from <a
href="../elements-of-clojure/">Elements of Clojure</a>.</p>
<h2 id="section-1">2024-02-10</h2>
<h3 id="state-pling-plong">State pling plong</h3>
<p>I’m <em>still</em> not used to playing around with stateful systems.
I avoid state like the plague! Should I change that? Perhaps?</p>
<p>If yes, how? Write an interactive chat application? Write some
logging thing? A way to visualize those logs?</p>
<p>Hmmm.</p>
<h2 id="section-2">2024-02-18</h2>
<h3 id="state-pling-plong-2">State pling plong 2</h3>
<p>Since last “State pling plong”, I set up a PostgreSQL database for <a
href="../mikrobloggeriet.no/">mikrobloggeriet.no</a>. That was a helpful
learning experience. I’m glad i spent the time.</p>
<h3 id="contributing-to-igrishaevpg2">Contributing to igrishaev/pg2</h3>
<p><a
href="https://github.com/igrishaev/pg2">https://github.com/igrishaev/pg2</a></p>
<p><a
href="https://github.com/igrishaev/pg2/issues/1">https://github.com/igrishaev/pg2/issues/1</a></p>
<h4 id="problem-no-repl-no-tests">Problem: no REPL, no tests</h4>
<p>When I tried starting a REPL like I normally do, it didn’t work.</p>
<dl>
<dt>Have I read the project docs?</dt>
<dd>
this might be described in the README or somewhere I haven’t read.
</dd>
<dt>Have I read the Leiningen docs?</dt>
<dd>
this should be described in the leiningen docs too.
</dd>
</dl>
<h4 id="unrelated-what-is-igrishaev-doing">Unrelated, what is igrishaev
doing?</h4>
<p><em>lots</em> of changes.</p>
<pre><code>README.md                                                 | 297 +++++++++++++++++++++++++++++++++++++-
pg-bench/src/pg/demo.clj                                  | 197 ++++++++++++++++++++++++-
pg-core/src/clj/pg/core.clj                               |  60 +++++---
pg-core/src/clj/pg/jdbc.clj                               | 262 +++++++++++++++++++++++++++++++++
pg-core/src/clj/pg/pool.clj                               |  10 +-
pg-core/src/java/org/pg/Accum.java                        |   4 +-
pg-core/src/java/org/pg/ConnConfig.java                   |  19 ++-
pg-core/src/java/org/pg/Connection.java                   |  21 ++-
pg-core/src/java/org/pg/ExecuteParams.java                |   1 +
pg-core/src/java/org/pg/Main.java                         |   9 +-
pg-core/src/java/org/pg/Payload.java                      |   1 +
pg-core/src/java/org/pg/auth/ScramSha256.java             |   2 +-
pg-core/src/java/org/pg/codec/DecoderBin.java             |   2 +-
pg-core/src/java/org/pg/codec/DecoderTxt.java             |   2 +-
pg-core/src/java/org/pg/codec/EncoderBin.java             |   5 +-
pg-core/src/java/org/pg/codec/EncoderTxt.java             |  18 ++-
pg-core/src/java/org/pg/enums/Format.java                 |   2 +-
pg-core/src/java/org/pg/enums/SASL.java                   |   2 +-
pg-core/src/java/org/pg/enums/TXStatus.java               |   2 +-
pg-core/src/java/org/pg/{ =&gt; error}/PGError.java          |   2 +-
pg-core/src/java/org/pg/{ =&gt; error}/PGErrorResponse.java  |   2 +-
pg-core/src/java/org/pg/json/JSON.java                    |   2 +-
pg-core/src/java/org/pg/msg/AuthenticationResponse.java   |   2 +-
pg-core/src/java/org/pg/msg/ErrorResponse.java            |   2 +-
pg-core/src/java/org/pg/msg/Execute.java                  |   2 +-
pg-core/src/java/org/pg/msg/FieldParser.java              |   2 +-
pg-core/src/java/org/pg/msg/NegotiateProtocolVersion.java |   2 +-
pg-core/src/java/org/pg/msg/NoticeResponse.java           |   2 +-
pg-core/src/java/org/pg/msg/NotificationResponse.java     |   2 +-
pg-core/src/java/org/pg/msg/Parse.java                    |   2 +-
pg-core/src/java/org/pg/pool/Pool.java                    |  22 ++-
pg-core/src/java/org/pg/{clojure =&gt; proto}/IClojure.java  |   2 +-
pg-core/src/java/org/pg/{reducer =&gt; proto}/IReducer.java  |   2 +-
pg-core/src/java/org/pg/reducer/Default.java              |   1 +
pg-core/src/java/org/pg/reducer/Dummy.java                |   1 +
pg-core/src/java/org/pg/reducer/First.java                |   1 +
pg-core/src/java/org/pg/reducer/Fold.java                 |   1 +
pg-core/src/java/org/pg/reducer/GroupBy.java              |   1 +
pg-core/src/java/org/pg/reducer/IndexBy.java              |   1 +
pg-core/src/java/org/pg/reducer/Java.java                 |   1 +
pg-core/src/java/org/pg/reducer/KV.java                   |   1 +
pg-core/src/java/org/pg/reducer/Matrix.java               |   1 +
pg-core/src/java/org/pg/reducer/Run.java                  |   1 +
pg-core/src/java/org/pg/type/PGEnum.java                  |   2 +-
pg-core/src/java/org/pg/util/HashTool.java                |   2 +-
pg-core/src/java/org/pg/util/HexTool.java                 |   2 +-
pg-core/src/java/org/pg/util/IOTool.java                  |   2 +-
pg-core/test/pg/client_test.clj                           |  18 ++-
pg-core/test/pg/concurrency_test.clj                      | 164 +++++++++++++++++++--
pg-core/test/pg/decode_txt_test.clj                       |   2 +-
pg-core/test/pg/encode_bin_test.clj                       |   2 +-
pg-core/test/pg/encode_txt_test.clj                       |   2 +-
pg-core/test/pg/jdbc_test.clj                             | 289 +++++++++++++++++++++++++++++++++++++
pg-core/test/pg/pool_test.clj                             |   4 +-
todo.md                                                   |  26 +++-
</code></pre>
<p>README, demo, tests. But “jdbc”??? Why jdbc?</p>
<pre><code>(ns pg.jdbc
  &quot;
  The Next.JDBC-friendly wrapper. Mimics most of the
  `next.jdbc` functions and macros.

  https://github.com/seancorfield/next-jdbc/blob/develop/src/next/jdbc.clj
  &quot;
  (:import
   clojure.lang.IPersistentMap
   clojure.lang.IFn
   org.pg.Connection
   org.pg.pool.Pool)
  (:require
   [clojure.set :as set]
   [pg.core :as pg]
   [pg.pool :as pool]))
</code></pre>
<p>specifically</p>
<blockquote>
<p>The Next.JDBC-friendly wrapper. Mimics most of the `next.jdbc`
functions and macros.</p>
</blockquote>
<p>Yeeeeah, OK. Not “let’s use jdbc and compare to pg2 to test our
code”, but “let’s provide a nice comptibility layer for those using
next.jdbc today.”</p>
<h4 id="project-docs-for-repl-and-tests">Project docs for REPL and
tests?</h4>
<p>Let’s see.</p>
<ul>
<li>Found <code class="verbatim">docker-compose.yaml</code> with lots of
different pg versions.</li>
<li>Toplevel <code class="verbatim">project.clj</code> contains <code
class="verbatim">:managed-versions</code> and <code
class="verbatim">:sub</code>
<ul>
<li><code class="verbatim">:managed-versions</code>: ??</li>
</ul></li>
<li><code class="verbatim">:java-source-paths</code>: hei.
<ul>
<li>Kilde: <a
href="https://github.com/teodorlu/pg2/blob/8c6ac8e451feaf0ed348fd546d0e413b5be267b4/pg-core/project.clj#L24">https://github.com/teodorlu/pg2/blob/8c6ac8e451feaf0ed348fd546d0e413b5be267b4/pg-core/project.clj#L24</a></li>
<li>Vi har noe java</li>
</ul></li>
</ul>
<h4 id="kompilere-subprosjekter-før-jeg-gjør-noe-mer">Kompilere
subprosjekter før jeg gjør noe mer?</h4>
<p>Jeg har nå gjort cirka følgende fra toppen:</p>
<pre><code>(cd pg-core &amp;&amp; lein clean &amp;&amp; lein javac &amp;&amp; lein install)
(cd pg-honey &amp;&amp; lein clean &amp;&amp; lein javac &amp;&amp; lein install)
(cd pg-component &amp;&amp; lein clean &amp;&amp; lein javac &amp;&amp; lein install)
</code></pre>
<p>… og jeg får nå <em>andre typer feil</em> når jeg prøver å kjøre
testene (feks med <code
class="verbatim">(cd pg-core &amp;&amp; lein test)</code>).</p>
<h4 id="docker-compose-up"><code
class="verbatim">docker compose up</code></h4>
<p>Feilene jeg fikk over så ut som “prøver å koble til port, finner
ikke”</p>
<pre><code>lein test pg.client-test

lein test :only pg.client-test/test-decode-oid

ERROR in (test-decode-oid) (IOTool.java:139)
PORT 10110
Uncaught exception, not in assertion.
expected: nil
  actual: org.pg.PGError: cannot open a socket, host: 127.0.0.1, port: 10110
 at org.pg.util.IOTool.socket (IOTool.java:139)
    org.pg.Connection._connect_unlocked (Connection.java:304)
    org.pg.Connection.connect (Connection.java:297)
    org.pg.Connection.&lt;init&gt; (Connection.java:73)
    org.pg.Connection.&lt;init&gt; (Connection.java:82)
[...]
</code></pre>
<p>Må jeg kjøre opp en PostgreSQL-instans lokalt?</p>
<pre><code>$ docker compose up
[...]
[+] Running 1/0
 ✔ Network pg2_default   Created                                                                   0.0s
 ⠋ Container pg2-pg14-1  Creating                                                                  0.0s
 ⠋ Container pg2-pg11-1  Creating                                                                  0.0s
 ⠋ Container pg2-pg15-1  Creating                                                                  0.0s
 ⠋ Container pg2-pg12-1  Creating                                                                  0.0s
 ⠋ Container pg2-pg16-1  Creating                                                                  0.0s
 ⠋ Container pg2-pg13-1  Creating                                                                  0.0s
Error response from daemon: make cli opts(): making volume mountpoint for volume /Users/teodorlu/dev/igrishaev/pg2/.docker/postgres/initdb.d: mkdir /Users: operation not permitted
Error: executing /opt/homebrew/bin/docker-compose up: exit status 1
</code></pre>
<p>Hmmmm.</p>
<ul>
<li>Kanskje han kjører Linux og mitt feiler på Mac.</li>
<li>Jeg kjører Podman, kanskje noe her krever vanlig Docker.</li>
</ul>
<h4 id="makefiles">Makefiles!</h4>
<p>Heh, det finnes jo makefiles overalt! :D De må jeg prøve.</p>
<h2 id="section-3">2024-02-25</h2>
<h3 id="scicloj-study-group">scicloj study group</h3>
<h4 id="people">people</h4>
<ol>
<li><p>daniel stuff</p>
<p>using ggplot from clojure work by generateme - how to use ggplot from
Clojure (clojisr)</p>
<p>90 minutes total</p></li>
<li><p>Teodor</p>
<p>Programming, civil engineering, product. Interested in data and data
visualization, <em>not</em> an expert.</p>
<p>Data Visualization: <em>not</em> an expert, and would definitely like
to get better.</p></li>
<li><p>thomas 2018</p>
<p>frontend databases, dashboards, visuals get into the data part “r is
a great place to start”</p>
<p>d3, three.js “grammer of graphics”</p>
<p>wrote a gallery</p></li>
<li><p>daniel</p>
<p>community organizer scicloj funded by clojurists together</p>
<ul>
<li>some open source</li>
</ul></li>
<li><p>andrew</p>
<p>dataviz and data science python, scala, r, clojure prior experience
with ggplot</p>
<p>found ggplot to be superior for fundamental reasons primarily clojure
now think there is a lot to learn from ggplot</p>
<p>implement wilkinsons “grammar of graphics”</p>
<p>“there’s a reason why ggplot2 is THE dataviz library for R” explore
more and learn.</p>
<p>daniel: what is grammar of graphics</p></li>
<li><p>kira</p>
<p>possible to do dataviz with vega / vega-lite “dataviz biggest
hole”</p>
<p>really cool to implement the grammar of graphics in clojure it’s an
idea, it’s a grammar</p>
<p>“right now, only impl is in R”</p></li>
<li><p>tomasz</p>
<p>written clojure libraries created “cljplot” from scratch, “lots of
mistakes”, hope to contribute</p></li>
<li><p>jaryt</p>
<p>phd student, small university midwest taught at a small university in
africa here to study, “be with the best!”</p></li>
</ol>
<h4 id="part-two">part two</h4>
<ol>
<li><p>intro, andrew</p>
<p>in the clojure world, we work with vega &amp; vega lite impl of
grammar of graphics</p>
<p>from leol wilkinson early work 80s statistical computing data
visualization access to computers was new spss “chief scientist” “h2o
AI” passed away grammar of graphics is his “magnus opus”</p>
<p>important because — page 2 —</p>
<p>first part, syntax</p>
<blockquote>
<p>we often call graphics charts (greek), latin pie charts, bar
charts</p>
<p>shuns charts</p>
<p>charts instances of general objects</p>
<p>pie is a divided bar into polar coordinates</p>
<p>histogram != bar charts</p>
<p>different grammars</p>
<p>fewer charts than wanted no deep structure no reuse cannot add new
charts “theory of graphics, not charts”</p>
</blockquote>
<p>decompose basic charts into the more fundamental things axes, scales
coordinates</p>
<p>ways of combining formal algebra</p>
<p>r library ggplot “much more directly implements the algebra” than
vega (lite) hypothesis: we’ll see ggplot2 perform better than vega
(lite).</p>
<p>Wilkinson book: <a
href="https://link.springer.com/book/10.1007/0-387-28695-0">https://link.springer.com/book/10.1007/0-387-28695-0</a></p>
<p>Other book: <a
href="https://ggplot2-book.org/">https://ggplot2-book.org/</a></p></li>
<li><p>daniel demo</p>
<p>Qs teodor</p>
<ol>
<li>Are you getting completion from CIDER?</li>
<li>What was the return value from <code
class="verbatim">(r "1 + 1")</code></li>
</ol>
<p>.</p>
<ul>
<li>fn for representing ggplot plots as a clojure data structure</li>
<li>ggplot lib can convert to clojure data</li>
<li>r is oo, we want data</li>
</ul></li>
<li><p>ggplot vs vega</p>
<p>ggplot has a combinator API</p>
<p>ways to combine primitives!</p>
<p>kira: about vega-lite, “have to understand everything in order to do
the fancy stuff” axes, layers, scales don’t want to care marks,
encodings have that magic “behind the scenes” translation between
high-level easy to EDN/JSON/…</p>
<p>andrew: “incremental specificity”, “compositional power”</p>
<p>daniel: functions, objects, “hidden” teodor: emmy, reitit, pure data
representation is opt-in</p>
<p>daniel: jun cho wants to look inside, ggplot is hiding ggplot-like
“functions and safety”, can check if args are ok perhaps we end up with
something safe to hanami</p></li>
<li><p>daniel demo</p>
<p>teodor: what if we start by translating from r</p>
<p>daniel: “stat layer” in your dataflow</p>
<p>“hard”. Actionabes?</p>
<ol>
<li>put more effort into studying</li>
<li>get a better teacher / access better pedagogy</li>
<li>learn a better topic</li>
</ol>
<p>scale: log scale, linear scale grammar: roles of “things” in function
calls</p>
<p>nice book.</p>
<p>chapter 13 - build a plot layer by layer <a
href="https://ggplot2-book.org/layers">https://ggplot2-book.org/layers</a></p>
<ul>
<li>“learn dataviz”</li>
<li>“learn r”</li>
<li>“learn grammar of graphics”</li>
<li>“reimplement in Clojure”</li>
</ul>
<p>thomasz has a nice backend, but is looking for a better way to create
the plots.</p>
<p>kira: move processing to the JVM side. CLJplot: crunching in Clojure
on the JVM</p>
<p>andrew: humble UI</p>
<p>thomas: learn, document the learning! kira: learn, document the
learning!</p>
<p>daniel: look into hanami. Defaults and some logic around defaults as
data.</p>
<p>Teodor: separate speed from design.</p>
<p>kira: sensible defaults, meta-merge them up current impl:
proliferation of chart templates, infinite number of possible chart
specifications. general data science work: need more general things.</p>
<p>“what’s better, vega, hanami or ggplot?” Kira: you don’t have to
understand everything in ggplot.</p>
<p>goal: can make it work without understanding what’s under the
abstractions goal: make it terse</p></li>
<li><p>teodor ggplot draft</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">ns</span> explore.ggplotj</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  (<span class="at">:refer-clojure</span> <span class="at">:exclude</span> [<span class="kw">+</span>]))</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">;; STEP 1: OPERATIONS AND EXAMPLE USAGE</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defn</span><span class="fu"> + </span>[])</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defn</span><span class="fu"> ggplot </span>[])</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defn</span><span class="fu"> aes </span>[])</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defn</span><span class="fu"> geom-point </span>[])</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co">;; STEP 2: PROTOCOLS AND STRUCTS</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co">;;</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co">;; ... assuming we don&#39;t need two-argument dispatch.</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="kw">+</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  ggplot</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>  aes</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  geom-point)</span></code></pre></div>
<p>alternative name: <code class="verbatim">jjplot</code>. Symmetry
&amp; hat tip to ggplot. Hat tip to CloJure &amp; Jvm.</p></li>
</ol>
<h2 id="section-4">2024-02-29</h2>
<h3 id="a-ui-for-updates">a UI for updates</h3>
<ul>
<li>based on <a href="../clerk/">Clerk</a> and <a
href="../datascript/">Datascript</a></li>
<li>view, then filter, then commit</li>
<li>REPL</li>
</ul>
<h2 id="section-5">2024-03-28</h2>
<h3 id="poor-performance-on-main-page">Poor performance on main
page</h3>
<p>Mostly because unpgk is slow to return.</p>
<p>Lessons:</p>
<ul>
<li>Don’t require JS bundles when those are not needed
<ul>
<li>I could implement that button without third party javascript just
fine</li>
<li>Or I could use Carve</li>
<li>Or I could use something else.</li>
</ul></li>
<li>It’s hard to benchmark load time when Live.js is doing its thing.
<ul>
<li>I could disable it temporarily?</li>
</ul></li>
</ul>
<p>Decision: disable livejs temporarily, rerun bench.</p>
<h2 id="section-6">2024-03-29</h2>
<h3 id="a-new-random-button">a new random button!</h3>
<script type="module">
import {IkiGotoRandomPage} from "/iki/iki.js";

customElements.define("iki-goto-random-page", IkiGotoRandomPage, {extends: "button"});
</script>

<button is="iki-goto-random-page">Iki goto random page!</button>

<h3 id="on-coding-without-a-goal">On coding without a goal</h3>
<p>I’ve made <a href="../play.teod.eu/">play.teod.eu</a> with a goal in
mind:</p>
<blockquote>
<p>Intent: bring ideas to life. Discuss, sharpen, play. Minimize the
distance between intent and reality.</p>
</blockquote>
<p>Without that goal, I would have worked differently. That goal helps
me know how to balance the amount of <a
href="../technical-debt/">technical debt</a> in my system. Rather than
code to code, I code to <em>achieve some outside goal</em>!</p>
<p>Lately, I discovered that I had 360 lower-case formatted UUIDs in my
system, and 36 upper-case formatted UUIDs. See for instance <a
href="https://github.com/teodorlu/play.teod.eu/commit/8f62a00f908e0c276bee603ba2c6a7eb72b013af">commit
8f62a0</a>. This is kind of embarrassing! But, what do I do with it? Fix
it?</p>
<p>I decided on the following:</p>
<ol>
<li>Change the code that <em>could</em> generate upper-case uuids to
generate lower-case uuids all the time.</li>
<li>Ensure that we actually do it right the second time around.</li>
<li>Nothing else.</li>
</ol>
</body>
</html>
